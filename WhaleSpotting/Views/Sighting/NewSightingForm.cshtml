@model WhaleSpotting.ViewModels.NewSightingFormViewModel
@using System.Security.Claims

@{
  ViewData["Title"] = "Add a sighting";
}

<div class="text-center">
  <h1>Add a Sighting</h1>
</div>

<section>
  @if (TempData.ContainsKey("ConfirmationMessage"))
    {
        <div class="alert alert-success" role="alert">
            @TempData["ConfirmationMessage"]
        </div>
    }

  <form method="post" asp-controller="Sighting" asp-action="NewSighting">
    <div class="col-md-4">
      <label for="Whale">Whale:</label>
      <select id="inputWhale" class="form-select" asp-for="SpeciesId">
        <option selected>Choose...</option>
        @foreach (var species in Model!.ListOfSpecies!)
        {
          <option value="@species.Id">@species.Name</option>
        }
      </select>
    </div>

    @if (User.Identity.IsAuthenticated)
        {
            <input type="hidden" asp-for="Sighting!.User.Id" value="@User.FindFirstValue(ClaimTypes.NameIdentifier)" />
        }
    
    <div class="my-2">
      <label for="Latitude">Latitude:</label>
      <input class="form-control" asp-for="Sighting!.Latitude" />
    </div>

    <div class="my-2">
      <label for="Longitude">Longitude:</label>
      <input class="form-control" asp-for="Sighting!.Longitude" />
    </div>

    <div class="my-2">
      <label for="Date">Date:</label>
      <input class="form-control" asp-for="Sighting!.Date" type="date" />
    </div>

    <div class="my-2">
      <label for="Description">Description:</label>
      <textarea class="form-control" asp-for="Sighting!.Description"></textarea>
    </div>
    <button type="submit" class="my-2 btn btn-primary">Submit</button>
  </form>
</section>
